!function(t){var e=t('<div class="stb-select-container"><span class="selected"></span></div>'),n=t('<ul class="stb-select" style="display:none;"></ul>');t.fn.stbDropdown=function(){var a=t(this);a.hide(),a.each(function(a,i){var s=e.clone(),o=n.clone(),c=t(i),l=c.find("option");c.after(s),c.appendTo(s),o.appendTo(s),l.each(function(e,n){var a=t(n),i=t("<li></li>"),s=a.prop("attributes");i.prop("attributes",s),t.each(s,function(t,e){i.attr(e.name,e.value)}),i.append(a.text()),o.append(i)}),s.find(".selected").text(t(l[0]).text()),s.on("click.stb.select",function(){var e=t(this),n=t.grep(t(".stb-select-container"),function(n){return!e.is(t(n))});t(n).find("ul").hide(),e.find("ul").toggle()}),s.on("click.stb.option","li",function(e){e.stopPropagation();var n=t(this),a=n.parents(".stb-select-container"),i=a.find("span.selected");i.text(n.text()),n.parents("ul").toggle();var s=a.find("select");s.val(n.attr("value"))}),c.on("DOMNodeInserted",function(e){var n=t(e.target);if(n.is("option")){var a=t("<li></li>"),i=n.prop("attributes");a.prop("attributes",i),t.each(i,function(t,e){a.attr(e.name,e.value)}),a.append(n.text()),o.append(a)}})})}}(jQuery);