!function(t){var e=t('<div class="stb-select-container"><span class="selected"></span></div>'),n=t('<ul class="stb-select" style="display:none;"></ul>');t.fn.stbDropdown=function(){var a=t(this);a.hide(),a.each(function(a,i){var o=e.clone(),s=n.clone(),c=t(i),r=c.find("option");c.after(o),c.appendTo(o),s.appendTo(o),r.each(function(e,n){var a=t(n),i=t("<li></li>"),o=a.prop("attributes");i.prop("attributes",o),t.each(o,function(t,e){i.attr(e.name,e.value)}),i.append(a.text()),s.append(i)}),o.find(".selected").text(t(r[0]).text()),o.on("click.stb.select",function(){var e=t(this),n=t.grep(t(".stb-select-container"),function(n){return!e.is(t(n))});t(n).find("ul").hide(),e.find("ul").toggle()}),o.on("click.stb.option","li",function(e){e.stopPropagation();var n=t(this),a=n.parents(".stb-select-container"),i=a.find("span.selected");i.text(n.text()),n.parents("ul").toggle();var o=a.find("select");o.val(n.attr("value")).change()}),c.on("DOMNodeInserted",function(e){var n=t(e.target);if(n.is("option")){var a=t("<li></li>"),i=n.prop("attributes");a.prop("attributes",i),t.each(i,function(t,e){a.attr(e.name,e.value)}),a.append(n.text()),s.append(a)}}),c.on("DOMNodeRemoved",function(e){var n=t(e.target);n.is("option")&&s.find("li:contains('"+n.text()+"')").remove()})})}}(jQuery);